<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="customer">
	<select id="list" resultType="Customer">
		SELECT * FROM customer
		ORDER BY cust_role DESC
	</select>
	
	
	<insert id="add">
		INSERT INTO customer
		VALUES(CUSTOMER_SEQ.nextval, #{custId}, #{custPasswd}, #{custName}, #{custAge}, #{custPhone}, #{custRole})
	</insert>
	
	<select id="item" resultType="Customer">
		SELECT customer.*
		FROM customer
		WHERE customer.cust_num = #{custNum}
	</select>
	
	<update id="update">
		UPDATE customer
		SET cust_id = #{custId}, cust_passwd=#{custPasswd}, cust_name=#{custName}, cust_age = #{custAge},
		cust_phone = #{custPhone}, cust_role=#{custRole}
	</update>
	
	<delete id="delete">
		DELETE FROM customer
		WHERE cust_num = #{custNum}
	</delete>
	
	<select id="itemid" resultType="Customer">
		SELECT * FROM customer WHERE cust_id = #{custId}
	</select>
	
	<insert id="addCoupon">
		INSERT INTO coupon_customer
		VALUES (#{custNum}, #{couponNum}, ADD_MONTHS(SYSDATE, 1));
	</insert>
</mapper>	